{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block script %}
<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>-->
<!--<script src="https://apis.google.com/js/api.js" type="text/javascript"></script>-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/layout.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='javascript/crawl/distancing.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/crawl/display.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/crawl/display_none.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/crawl/show_map_home.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/populate_table.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/go_pub.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/go_add.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/go_day.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/go_week.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/feature_click.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/feature_home.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/feature_list.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/code_address.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/show_map.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/add_map_click.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/add_markers.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/map_load.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/listen_search.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/map_listen_bounds.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/maps/add_marker_bounds.js') }}"></script>

<script>
function onLoad(){
        console.log('onLoad')
        zoom = {{ map_zoom }}
        console.log('zoom: ' + zoom)
        counter = {{ counter | tojson }}
        icon_list = {{ icon_list | tojson }}
        config2 = {{ config2 | tojson }}
        areas = {{ areas | tojson }}

        form_type = {{ form_type | tojson }}
        mapLoad('{{google_key}}', form_type, 'all');

        display_counter(counter);
    }

function initMap(){
        console.log('initMap')
        pubs_selection = {{pubs_selection | tojson }}
        const input = document.getElementById("tags_postcode");
        const searchBox = new google.maps.places.SearchBox(input);
        map = show_map(0, 0)
        add_markers(map, pubs_selection)
    }
</script>
{% endblock %}

{% block main %}
<div class="col-md-12 mx-auto " id="main">
    {% include "home_intro.html" %}
    <div class="row" style="padding: 10px; border:1px solid #0275d8;">
        <div class="col">
            {% include "home_station.html" %}
            {% include "pub_week.html" %}
            {% with auto_exec='off' %}
                {% include "home_features.html" %}
            {% endwith %}
        </div>
    </div>
    {% with auto_exec='off' %}
        {% include "home_by_name.html" %}
    {% endwith %}
    {% include "home_area.html" %}
</div>
{% endblock %}

{% block counter %}
    {% include "counter.html" %}
{% endblock %}
