{% extends 'base.html' %}

{% block title %}Listing View{% endblock %}

{% block script %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='jquery/css/jquery.dataTables.min.css') }}">
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/layout.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='jquery/js/jquery.dataTables.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/create_table.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/filter_table.js') }}"></script>
<script>
function onLoad() {
    console.log("onLoad in pub_list");
    filter = {{ filter | tojson }}
    var header_listing = String(filter['0']).toUpperCase() + String(filter).substring(1)
    document.getElementById("header_listing").innerHTML = "<h2>" + header_listing + "</h2>"
    var map_lat = {{ map_lat | tojson }}
    var map_lng = {{ map_lng | tojson }}
    var map_view = {{ map_view | tojson }}
    pubs_reviews = {{ pubs_reviews | tojson }};
    list_type = {{ list_type | tojson }}
    id_type = {{ id_type | tojson }}
    if (list_type == 'area') {
        console.log('area')
        Area()
    } else {
        console.log('NOT area')
        Category()
    }
}
</script>
{% endblock %}

{% block main %}
<div class="col-md-12 mx-auto">
    <div id="header_listing"></div>
    <div id="table-pubs-json" style="background-color:#CDCDCD; overflow-x:scroll" ></div>
    <div class="row justify-content-center top-buffer">
        <div class="col-md-3"></div>
        <div class="col-md-2 mx-auto"><a class="btn btn-primary btn-block" href="{{ url_for('pub_add') }}" role="button">Add New</a></div>
        <div class="col-md-2 mx-auto"><a class="btn btn-primary btn-block" href="{{ url_for('home') }}" role="button">Back to Home</a></div>
        <div class="col-md-2 mx-auto"><a class="btn btn-primary btn-block" href="{{ url_for('pub_areas') }}" role="button">All Areas</a></div>
        <div class="col-md-3"></div>
    </div>
    {% include "footer.html" %}
</div>
{% endblock %}
