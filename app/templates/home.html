{% extends 'navbar.html' %}

{% block title %}Home{% endblock %}

{% block script %}
<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>-->
<!--<script src="https://apis.google.com/js/api.js" type="text/javascript"></script>-->
<script>
function myFunction(check_item) {
  var checkBox = document.getElementById(check_item);
  var text = document.getElementById("img_" + check_item);
  if (checkBox.checked == true){
    text.style.opacity = "1"
  } else {
     text.style.opacity = "0.25"
  }
}
</script>
<script>
function onLoad(){
    var photo_array = {{ photo_array | tojson }}
    var map_lat = {{ map_lat | tojson }}
    var map_lng = {{ map_lng | tojson }}
    var map_view = {{ map_view | tojson }}
    var config = {{ config | tojson }}
    var areas = {{ areas | tojson }}
}

</script>
{% endblock %}

{% block slider %}
Welcome {{session.get('user_id')}} to the Pub Crawls.  Please enjoy and drink responsibly .......
{% endblock %}

{% block form %}
<div class="col">
    <div class="row">
        <div class="col-12 center-block text-center">Pubs by features</div>
    </div>
    <div class="row" id="feature-list"></div>

    <div class="row">
        <div class="col-12 center-block text-center">Pubs by location</div>
    </div>
    <div class="row">
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                {% for x in areas.length %}
                    <li data-target="#carouselExampleIndicators" data-slide-to="{{x}}"></li>
                {% endfor %}
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="{{ url_for('static', filename='images/location/' + areas[0]['area'].lower() + '.jpg') }}" style="height: 175px; width: 300px" alt="">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>{{areas[0]['area']}}</h5>
                    </div>
                </div>
                {% for area in areas[1:] %}
                    <div class="carousel-item">
                        <img class="d-block w-100" src="{{ url_for('static', filename='images/location/' + area['area'].lower() + '.jpg') }}" style="height: 175px; width: 300px" alt="">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>{{area['area']}}</h5>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-12 center-block text-center">Pubs by rating</div>
    </div>

    <div class="row">
        <div class="col-12 center-block text-center">Pubs by quality</div>
    </div>
    <div class="row">
        <div class="container" id="star-node">
            {% for rl in row_loop %}
                <div class="row">
                    {% for cl in col_loop %}
                        <div class="col-md-3">
                            <div class="container-photo">
                                <img id="{{ photo }}" src="{{ url_for('static', filename='images/category/' + photo_array['review']['photo'][(rl*4)+cl] + '.jpg') }}"
                                     class="w-100 shadow-1-strong rounded mb-4" style="height: 175px; width: 300px"/>
                                <div class="centered-photo">
                                    <strong><a href="../pub/star/{{ photo_array[(rl*4)+cl] }}" style="color:#ffffff;">
                                        {% if photo_array['review']['photo'][(rl*4)+cl] == 'blank1' or photo_array['review']['photo'][(rl*4)+cl] == 'blank2' %}
                                        {% else %}
                                            {{photo_array['review']['photo'][(rl*4)+cl]}}
                                        {% endif %}</a>
                                    </strong>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>
<script>
var form_node = document.createElement("div");
form_node.setAttribute("class", "form-group row");
id_row = "row_checks"
form_node.setAttribute("id", id_row);
document.getElementById('feature-list').appendChild(form_node);
</script>
{% for field in config['control']['check'] %}
    <script>

        var div_node = document.createElement("div");
        div_node.setAttribute("class", "col");
        id_div = "div_" + '{{field}}'
        div_node.setAttribute("id", id_div);
        document.getElementById(id_row).appendChild(div_node);

        var check_node = document.createElement("input");
        check_node.setAttribute("type", 'checkbox');
        check_node.setAttribute("id", '{{field}}');
        check_node.setAttribute("name", '{{field}}');
        check_node.setAttribute("style", "display: none;");
        check_node.setAttribute("onclick", "myFunction('{{field}}')")
        document.getElementById(id_div).appendChild(check_node);

        var img_label_node = document.createElement("label")
        img_label_node.setAttribute("for", '{{field}}');
        id_img_label = "id_img_" + '{{field}}'
        img_label_node.setAttribute("id", id_img_label);
        document.getElementById(id_div).appendChild(img_label_node);

        var img_node = document.createElement("img");
        img_node.setAttribute("src", "{{ url_for('static', filename='icons/' + field + '.png') }}")
        img_node.setAttribute("width", "50")
        img_node.setAttribute("height", "50")
        id_img = "img_" + '{{field}}'
        img_node.setAttribute("id", id_img);
        img_node.setAttribute("name", id_img);
        img_node.style.opacity = "1"
        document.getElementById(id_img_label).appendChild(img_node);

    </script>
{% endfor %}

{% endblock %}

{% block navbar_home %}<a class="nav-link active_custom" href="/index">Home</a>{% endblock %}</li>
{% block pub_read_btn %}{% endblock %}
{% block pub_edit_btn %}{% endblock %}
{% block pub_del_btn %}{% endblock %}
{% block rev_read_btn %}{% endblock %}
{% block rev_add_btn %}{% endblock %}
{% block rev_edit_btn %}{% endblock %}
{% block rev_del_btn %}{% endblock %}
{% block search_btn %}{% endblock %}
