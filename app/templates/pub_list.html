{% extends 'navbar.html' %}

{% block title %}Listing View{% endblock %}

{% block script %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='jquery/css/jquery.dataTables.min.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='jquery/js/jquery.dataTables.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/html/create_table.js') }}"></script>
<script>
function onLoad(){
    console.log("onLoad in pub_list");
    filter = {{ filter | tojson }}
    var header_listing = String(filter['0']).toUpperCase() + String(filter).substring(1)
    document.getElementById("header_listing").innerHTML = "<h2>" + header_listing + "</h2>"
    var map_lat = {{ map_lat | tojson }}
    var map_lng = {{ map_lng | tojson }}
    var map_view = {{ map_view | tojson }}
    pubs_reviews = {{ pubs_reviews | tojson }};
    switch(map_view) {
<!--        case 'list':-->
<!--            document.getElementById("station").checked = true;-->
<!--            Station()-->
<!--            break;-->
<!--        case 'station':-->
<!--            document.getElementById("station").checked = true;-->
<!--            Station()-->
<!--            break;-->
        case 'category':
            document.getElementById("type").checked = true;
            Type()
            break;
        case 'star':
            document.getElementById("star").checked = true;
            Star()
            break;
        case 'area':
            document.getElementById("area").checked = true;
            Area()
            break;
        default:
            document.getElementById("area").checked = true;
            Station()
            break;
        }
}

function Area() {
    document.getElementById("table-pubs-json").innerHTML = create_table(pubs_reviews)
    $(document).ready(function () {
        $('#pub_list').DataTable({
            order: [[5, 'desc']],
            columnDefs: [
                    {target: 1, visible: false, searchable: false, },
                    {target: 4, visible: false, searchable: false, },
                    {target: 5, visible: false, searchable: false, },
                        ]
        });
    });
}

function Station() {
    document.getElementById("table-pubs-json").innerHTML = create_table(pubs_reviews)
    $(document).ready(function () {
        $('#pub_list').DataTable({
            order: [[5, 'desc']],
            columnDefs: [
                    {target: 1, visible: false, searchable: false, },
                    {target: 3, visible: false, searchable: false, },
                    {target: 4, visible: false, searchable: false, },
                    {target: 5, visible: false, searchable: false, },
                        ]
        });
    });
}

function Type() {
    document.getElementById("table-pubs-json").innerHTML = create_table(pubs_reviews)
    $(document).ready(function () {
        $('#pub_list').DataTable({
            order: [[5, 'desc']],
            columnDefs: [
                    {target: 3, visible: false, searchable: false, },
                    {target: 4, visible: false, searchable: false, },
                    {target: 5, visible: false, searchable: false, },
                        ]
        });
    });
}

function Star() {
    document.getElementById("table-pubs-json").innerHTML = create_table(pubs_reviews)
    $(document).ready(function () {
        $('#pub_list').DataTable({
            order: [[5, 'desc']],
            columnDefs: [
                    {target: 1, visible: false, searchable: false, },
                    {target: 3, visible: false, searchable: false, },
                    {target: 5, visible: false, searchable: false, },
                        ]
        });
    });
}

function Reset() {
     window.location = "/pub/list";
}

</script>
{% endblock %}

{% block slider %}
<!--    <div class="form-check-inline">-->
<!--        <label class="form-check-label">-->
<!--            <input type="radio" class="form-check-input" name="optradio" id="location" value="1" onclick="Station()" />Location-->
<!--        </label>-->
<!--    </div>-->
    <div class="form-check-inline">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="optradio" id="area" value="1" onclick="Area()" />Area
        </label>
    </div>
    <div class="form-check-inline">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="optradio" id="type" value="2" onclick="Type()";>Category
        </label>
    </div>
    <div class="form-check-inline">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="optradio" id="star" value="3" onclick="Star()";>Star Quality
        </label>
    </div>
{% endblock %}

{% block form %}
<div id="header_listing"></div>
<div id="table-pubs-json" style="background-color:#CDCDCD; overflow-x:scroll" ></div>
{% endblock %}

{% block navbar_list %}<a class="nav-link active_custom" href="/pub/list">Listing</a>{% endblock %}
{% block pub_read_btn %}{% endblock %}
{% block pub_edit_btn %}{% endblock %}
{% block pub_del_btn %}{% endblock %}
{% block rev_read_btn %}{% endblock %}
{% block rev_add_btn %}{% endblock %}
{% block rev_edit_btn %}{% endblock %}
{% block rev_del_btn %}{% endblock %}
{% block search_btn %}{% endblock %}
