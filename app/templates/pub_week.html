<script>
function checkRadio(value, auto_exec) {
    diary_headers = {{diary_headers | tojson}}
    for (let i = 0; i < diary_headers.length; i++) {
        var checkBox = document.getElementById(diary_headers[i])
        var imageBox = document.getElementById(diary_headers[i] + "_img")
        if (diary_headers[i] == value) {
            if (checkBox.checked == true) {
                imageBox.style.opacity = "1"
                document.getElementById('day').value = value
            } else {
                imageBox.style.opacity = "0.5"
                document.getElementById('day').value = 'all'
            }
        } else {
            checkBox.checked = false
            imageBox.style.opacity = "0.5"
        }
    }
    if (auto_exec == 'on') {
        handleChange(document.getElementById('day').value)
    }
}
function handleChange(value) {
    console.log("handleChange")
    console.log(value)
    var base_url = window.location.hostname
    if (config2['env'] == 'prod') {
        var url = "http://" + base_url + "/pub/list/"
    } else {
        var url = "http://" + base_url + ":5000/pub/list/"
    }
    const myUrlWithParams = new URL(url);
    myUrlWithParams.searchParams.append('direction', direction);
    myUrlWithParams.searchParams.append('station', station);
    myUrlWithParams.searchParams.append('day', value);
    for (var i = 0; i < icon_list.length; i++) {
        console.log(icon_list[i])
        console.log(document.getElementById(icon_list[i]).checked)
        myUrlWithParams.searchParams.append(icon_list[i], document.getElementById(icon_list[i]).checked);
    }
    window.location.replace(myUrlWithParams.href);
}
</script>

{% if form_type=='home' %}
<div class="row">
    <div class="col mx-auto">
        <div class="d-flex justify-content-center" style="font-weight: bold;">
             and/or daily activity
        </div>
    </div>
</div>
{% endif %}

<div class="row">
    <div class="col mx-auto">
        <div class="d-flex justify-content-center">
            <input type="text" id="day" style="display: none" value="all">
            {% for day in diary_headers %}
            <div>
                <div>
                    <input style="display:none" type="checkbox" id='{{day}}' name='{{day}}' value='{{day}}' onclick="checkRadio(this.value, '{{auto_exec}}')">
                </div>
                <div>
                    <label for='{{day}}' style="margin:0px; padding:0px" >
                        <img src="{{ url_for('static', filename='icons/' + day + '.png' ) }}" id="{{day}}_img"
                             width="25" height="25" style="opacity: 0.5;">
                    </label>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
